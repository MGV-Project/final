<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mgv.store.mapper.OrderMapper">
    <insert id="insertOrder" parameterType="Order" useGeneratedKeys="true" keyProperty="no">
        INSERT INTO MGV_ORDER
        (
         ORDER_ID,
         ORDER_TOTAL_PRICE,
         USER_ID
        )
        VALUES
            (#{id}, #{totalPrice}, #{user.id})
    </insert>
    <select id="getOrderList" resultType="Order">
    	SELECT
	    	ORDER_ID	AS orderId,	
			USER_ID		AS userId,
			USER_NAME	AS userName,
			ORDER_NAME	AS orderName,
			TOTAL_PRICE	AS totalPrice,
			CREATE_DATE	AS createDate,
			UPDATE_DATE	AS updateDate,
			ORDER_STATE	AS orderState
    	FROM
    		MGV_ORDER
    	WHERE
    	    ORDER_STATE LIKE '%완료'
		    OR
		    ORDER_STATE LIKE '%취소'
		ORDER BY
		    CREATE_DATE DESC 
		LIMIT
		    6;
    </select>
</mapper>