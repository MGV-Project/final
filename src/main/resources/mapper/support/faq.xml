<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.mgv.support.dao.FaqDao">

	<select id="getTotalRows" parameterType="map" resultType="int">
		select count(*)
		from MGV_SUPPORT_FAQ A, MGV_SUPPORT_CATEGORIES B
		where 			
			A.CATEGORY_NO = B.CATEGORY_NO
			and A.FAQ_DELETED = 'N'
			<if test="keyword != null">
				and A.FAQ_TITLE like  CONCAT('%', #{keyword}, '%')	
			</if>
			<if test="catNo != 1">
				and A.CATEGORY_NO = #{catNo}
			</if>
	</select>

	<select id="getFaqListByNo" parameterType="map" resultType="kr.co.mgv.support.vo.Faq">
		select 
			A.FAQ_NO			as no,
			A.FAQ_TITLE			as title,
			A.FAQ_CONTENT		as content,
			A.FAQ_DELETED		as deleted,
			A.CATEGORY_NO		as "category.no",
			B.CATEGORY_NAME 	as "category.name"
		from 
			MGV_SUPPORT_FAQ A, MGV_SUPPORT_CATEGORIES B
		where 
			A.CATEGORY_NO = B.CATEGORY_NO
			and A.FAQ_DELETED = 'N'
			<if test="keyword != null">
				and A.FAQ_TITLE like  CONCAT('%', #{keyword}, '%')	
			</if>
			<if test="catNo != 1">
				and A.CATEGORY_NO = #{catNo}
			</if>
		order by
			A.FAQ_NO DESC
		LIMIT 10 OFFSET #{begin}
	</select>
	
	<select id="getCategories" parameterType="string" resultType="kr.co.mgv.support.vo.SupportCategory">
		SELECT 
			CATEGORY_NO		as no,
			CATEGORY_NAME	as name, 
			CATEGORY_TYPE	as type
		FROM 
			MGV_SUPPORT_CATEGORIES
		where 
			CATEGORY_TYPE = #{value}
			and CATEGORY_no != 1
	</select>
	
</mapper>










