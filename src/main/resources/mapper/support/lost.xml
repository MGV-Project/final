<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.mgv.support.dao.LostDao">

	<insert id="insertLost" parameterType="kr.co.mgv.support.vo.Lost">
		INSERT INTO MGV_SUPPORT_LOST
		(lost_title, lost_content, lost_filename,
		user_id, user_name, user_email,
		location_no, theater_no,
		lost_guest_name, lost_guest_email, lost_guest_password)
		values
		(#{title}, #{content}, #{fileName}, 
	    #{user.id}, #{user.name}, #{user.email}, 
	    #{location.no}, #{theater.no}, 
	    #{guestName}, #{guestEmail}, #{guestPassword});
				
	</insert>
	
	<select id="getLocations" resultType="kr.co.mgv.theater.vo.Location">
		SELECT
    		location_no		as no,
    		location_name	as name
    	from MGV_LOCATION
	</select>
	
	<select id="getTheatersByLocationNo" parameterType="int" resultType="kr.co.mgv.theater.vo.Theater">
		SELECT 
    		A.theater_no		as no,
    		A.theater_name		as name,
    		A.location_no		as "location.no",
    		B.location_name		as "location.name"
    	from MGV_THEATERS A, MGV_LOCATION B
    	where
    		A.location_no = B.location_no 
    		and A.location_no = #{value}
	</select>

</mapper>